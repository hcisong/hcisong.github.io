<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!-- <meta http-equiv="Content-Security-Policy" content="trustedHTML 'self'"> -->


    <title>SVS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">


        
    <style>
        html,
        body {
            /* overflow: hidden; */
            width: 100%;
            min-height: 100%;
            margin: 0;
            padding: 0;
        }

        .des-title {
            margin-top: 30px;
            font-size: 50px;
            font-weight: bold;
        }

        .des-text {
            text-align: left;
            margin-top: 20px;
        }

        #copyButton {
            display: none;
        }

        #btnGroups {
            display: none;
        }

        .btnGroup {
            margin-top: 10px;
            text-align: center;
            /* float: left; */
        }

        .customBtn {
            /* width: 100%; */
        
            font-weight: 300;
            line-height: 35px;
            background-color: white;
            color: #1d1d1b !important;

            border: 1px solid #1d1d1b;
            border-radius: 0;
            margin-top: 5px;
                
            &:hover {
                color: white !important;
                background-color: #1d1d1b;
                text-decoration: none;
            }
        }

        .customBtn a {
            color: black;
            text-decoration: none;
            width: 100%;

            &:hover {
                color: white !important;
                background-color: #1d1d1b;
                text-decoration: none;
            }

            &:active {
                background-color: rgba(207, 206, 206, 0.769);
            }

            /* &:visited {
                color: rgba(207, 206, 206, 0.769);
            } */
        }

        .customBtn:hover a {
            color: white !important;
            background-color: #1d1d1b;
            text-decoration: none;
        }

        

        .contentBtn {
            font-weight: 300;
            line-height: 35px;
            background-color: white;
            color: #1d1d1b !important;
            width: 100%;

            border: 1px solid #1d1d1b;
            border-radius: 0;

            &:hover {
                color: white !important;
                background-color: #1d1d1b;
                text-decoration: none;
            }

            &:last-child {
                margin-bottom: 20px;
            }
        }

        #generatedCode {
            background-color: rgba(207, 206, 206, 0.769);
            line-height: 35px;
        }

        #demoForm {
            display: none;
        }

        #finishDemoButton {
            display: none;
        }

        #infoMsg {
            display: none;
            /* margin-top: 5px;
            margin-bottom: 10px; */
            /* text-align: left; */
        }

        .afterClick {
            color: rgba(153, 156, 156, 0.836);
        }

        .stepInfo {
            font-style: italic;
            text-align: left;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .btn {
            margin: 5px;
        }

        #step_9 {
            margin-top: 20px;
            margin-bottom: 40px;
        }

        .modal-dialog {
            display: flex;
            align-items: center;
            /* justify-content: center; */
            min-height: 100vh;
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <div class="container text-center">
        
        <div class="modal fade show" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-modal="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Hello and welcome to our user study!</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <p>
                    To make sure you're all set to dive into the virtual experience, you'll need to put on your headset. <br>Don't worry, we've got you covered! <br> Follow the instructions we've put together for you <a href="./headsetConfig.html" target="_blank">here</a>. <br>These steps will guide you through the setup process so you can immerse yourself in the study seamlessly.
                  </p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">I see!</button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Link to Bootstrap JS (required for modal functionality) -->

        <div class="row">
            
            <div class="col-8 offset-2">
                <div class="des-title">
                    <h1>Welcome to Our User Study!</h1>
                </div>
                <div class="des-text">
                    <p>
                        Hello and welcome to our user study! We're excited to have you join us on this journey of discovery. In this study, we're offering you a chance to explore virtual reality. Your insights are incredibly valuable to us, and we can't wait to hear your thoughts.
                    </p>
                    <h2>What's in Store:</h2>
                    <p>
                        Get ready to step into a world of virtual reality and experience six unique everyday models up close. Our study revolves around these models, and we're eager to see how they compare to their physical counterparts.
                    </p>
                    <h2>What You'll Do:</h2>
                    <p>
                        Once you're all set with your headset, you'll be able to interact with these virtual models. We're interested in your observations and opinions, which is why we've prepared a questionnaire for you to fill out. Your feedback will help us understand the similarities and differences between the virtual and physical worlds.
                    </p>
                    <h2>Getting Started:</h2>
                    <p>
                        To make sure you're all set to dive into the virtual experience, you'll need to <b>put on your headset</b>. Don't worry, we've got you covered! Follow the instructions we've put together for you <a href="./headsetConfig.html" target="_blank">here</a>. These steps will guide you through the setup process so you can immerse yourself in the study seamlessly.
                        <br>
                        For more details about the study, you can find everything you need at this <a style="color: black" href="https://kuleuven-my.sharepoint.com/:b:/g/personal/xuesong_zhang_kuleuven_be/EfeV9pIDJ69Ou-cMN_uO5zgBrM6ZIOacSZDMY-LGdVmnng?e=pkSaTU">information letter</a>. Your participation means a lot to us, and we're here to support you throughout the process.
                        <br>
                        Thank you for being a part of this journey into virtual reality. Let's explore together and uncover the possibilities it holds!
                    </p>
                </div>
            </div>
        </div>
        <div class="row">
            <p class="col-8 offset-2 stepInfo">STEP 1</p>
        </div>
        <div class="row">
            <div class="col-4 offset-4">

                <p id="hintInfo">Please press the button to generate your ID.</p>

                <button id="generateButton" class="contentBtn" onclick="handleGenerateClick()">Generate Code</button>

                <div>

                    <p id="generatedCode"></p>

                    <button id="copyButton" class="contentBtn" onclick="handleCopyClick()">Copy</button>
                </div>
            </div>
        </div>
        <div class="row">
            <p class="col-2 offset-2 stepInfo">STEP 2</p>
            <p id="infoMsg">
                Please copy your ID and fill in the demographic questionnaire. 
            </p>
        </div>
        <div class="row" id="demoForm">
            <iframe width="640px" height="480px" src="https://forms.office.com/Pages/ResponsePage.aspx?id=m1hzOUCetU6ADrC2OD0WIdsgzKp46jZItHHcee2MmZFURTEwOVpOMkFCTFNMWjZNMDRORlBUWFVKQS4u&embed=true" frameborder="0" marginwidth="0" marginheight="0" style="border: none; max-width:100%; max-height:100vh" allowfullscreen webkitallowfullscreen mozallowfullscreen msallowfullscreen> </iframe>
        </div>

        <div class="row btn-row">
            <div class="col-8 offset-2">
                <button id="finishDemoButton" class="contentBtn" onclick="handleFinishDemoClick()">I confirm I have already fisished the demographic questionnaire and submit it.</button>

            </div>
        </div>
        <div class="row">
            <div class="col-8 offset-2" id="btnGroups">
                <div class="btnGroup">
                    <p>
                        Please press the button and jump to VR to observe the <b>Lamp</b> model and fill in the questionnaire afterwards. 
                        <br>
                        <a style="color: black" href="./headsetConfig.html#step_7" target="_blank">Manual in VR</a>
                    </p>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-lamp-1.html" target="_blank">Lamp 1</a>
                    </button>
                    <button type="button" class="col-2  customBtn">
                        <a href="./model-lamp-2.html" target="_blank">Lamp 2</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-lamp-3.html" target="_blank">Lamp 3</a>
                    </button>
                    <button type="button" class="col-2 customBtn" target="_blank">
                        <a href="./model-lamp-4.html" target="_blank">Lamp 4</a>
                    </button>
                </div>
                <div class="btnGroup">
                    <p>
                        Please press the button and jump to VR to observe the <b>Button</b> model and fill in the questionnaire afterwards. 
                        <br>
                        <a style="color: black" href="./headsetConfig.html#step_7" target="_blank">Manual in VR</a>
                    </p>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-button-1.html" target="_blank">Button 1</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-button-2.html" target="_blank">Button 2</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-button-3.html" target="_blank">Button 3</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-button-4.html" target="_blank">Button 4</a>
                    </button>
                </div>
                <div class="btnGroup">
                    <p>
                        Please press the button and jump to VR to observe the <b>Bottle</b> model and fill in the questionnaire afterwards. 
                        <br>
                        <a style="color: black" href="./headsetConfig.html#step_7" target="_blank">Manual in VR</a>
                    </p>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-bottle-1.html" target="_blank">Bottle 1</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-bottle-2.html" target="_blank">Bottle 2</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-bottle-3.html" target="_blank">Bottle 3</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-bottle-4.html" target="_blank">Bottle 4</a>
                    </button>
                </div>
                <div class="btnGroup">
                    <p>
                        Please press the button and jump to VR to observe the <b>Microwave</b> model and fill in the questionnaire afterwards. 
                        <br>
                        <a style="color: black" href="./headsetConfig.html#step_7" target="_blank">Manual in VR</a>
                    </p>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-mic-1.html" target="_blank">Microwave 1</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-mic-2.html" target="_blank">Microwave 2</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-mic-3.html" target="_blank">Microwave 3</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-mic-4.html" target="_blank">Microwave 4</a>
                    </button>
                </div>
                <div class="btnGroup">
                    <p>
                        Please press the button and jump to VR to observe the <b>Light Switch</b> model and fill in the questionnaire afterwards. 
                        <br>
                        <a style="color: black" href="./headsetConfig.html#step_7" target="_blank">Manual in VR</a>
                    </p>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-switch-1.html" target="_blank">Light Switch 1</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-switch-2.html" target="_blank">Light Switch 2</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-switch-3.html" target="_blank">Light Switch 3</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-switch-4.html" target="_blank">Light Switch 4</a>
                    </button>
                </div>
                <div class="btnGroup">
                    <p>
                        Please press the button and jump to VR to observe the <b>Joy-Con</b> model and fill in the questionnaire afterwards. 
                        <br>
                        <a style="color: black" href="./headsetConfig.html#step_7" target="_blank">Manual in VR</a>
                    </p>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-joycon-1.html" target="_blank">Joy-Con 1</a>
                    </button>
                    <button type="button" class="col-2 customBtn">
                        <a href="./model-joycon-2.html" target="_blank">Joy-Con 2</a>
                    </button>
                    <button type="button" class="col-2 customBtn">

                        <a href="./model-joycon-3.html" target="_blank">Joy-Con 3</a>
                    </button>
                    <button type="button" class="col-2 customBtn">

                        <a href="./model-joycon-4.html" target="_blank">Joy-Con 4</a>
                    </button>
                </div>
                <!-- </div> -->

            </div>
            <!-- <div class="row btn-row">
                <div class="col-8 offset-2">
                
                    <button type="button" class="col-2 customBtn">
                        <a href="./questionnaire.html" target="_blank">questionnaire</a>
                    </button>

                </div>
            </div> -->
            <div class="row" id="step_9">
                <p>
                    Thank you for particiapnting this user study. 
                </p>
            </div>
            

        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/umd/uuid.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


    <script>
        // Function to generate a UUID code
        function generateUniqueID() {
            return uuid.v4();
        }

        document.addEventListener('DOMContentLoaded', function() {
            var modal = new bootstrap.Modal(document.getElementById('exampleModal'));
            modal.show();
        });

        function handleGenerateClick() {
            const generatedCode = generateUniqueID();
            const generatedCodeElement = document.getElementById('generatedCode');
            const hintInfoElement = document.getElementById('hintInfo');
            generatedCodeElement.textContent = generatedCode;
            hintInfoElement.textContent = "Your ID is: ";
            // Show the copy button
            const copyButton = document.getElementById('copyButton');
            const btnGroupsBlock = document.getElementById('btnGroups');
            const demoForm = document.getElementById('demoForm');
            const finishDemoButton = document.getElementById('finishDemoButton');
            copyButton.style.display = 'inline';
            finishDemoButton.style.display = 'block';
            demoForm.style.display = 'block';
            document.getElementById('generateButton').style.display = 'none';
            document.getElementById('infoMsg').style.display = 'inline';
        }

        const btnGroupsBlock = document.getElementById('btnGroups');
        const demoForm = document.getElementById('demoForm');
        const finishDemoButton = document.getElementById('finishDemoButton');
        const infoMsg = document.getElementById('infoMsg');


        function handleFinishDemoClick(){
            
            finishDemoButton.style.display = 'none';
            demoForm.style.display = 'none';
            btnGroupsBlock.style.display = 'block';
            infoMsg.style.color = 'rgba(153, 156, 156, 0.836)';
            infoMsg.style.textDecoration = 'line-through';

            //infoMsg.textContent = "Please click the button and observe the model in VR to start the user study.";
        }

        function handleCopyClick() {
            const generatedCodeElement = document.getElementById('generatedCode');
            const codeToCopy = generatedCodeElement.textContent;
            // Create a temporary textarea to copy the code to the clipboard
            const textarea = document.createElement('textarea');
            textarea.value = codeToCopy;
            document.body.appendChild(textarea);
            textarea.select();
            // Copy the text to the clipboard
            document.execCommand('copy');
            // Remove the temporary textarea
            document.body.removeChild(textarea);
            // Show a message or update the button text to indicate successful copy
            alert('Code copied to clipboard! Please remember the code!');
        }

        function shuffleArray(array) {
            for (var i = array.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = array[i];
                array[i] = array[j];
                array[j] = temp;
            }
        }
        // Function to generate a random value between 1 and 4 (inclusive)
        function getRandomValue() {
            return Math.floor(Math.random() * 4) + 1;
        }

        function showRandomButton() {
            // Generate random values for x and y
            var x = getRandomValue();
            var y = getRandomValue();
            var values = [1, 2, 3, 4, x, y];
            // Shuffle the values array to randomize the order
            shuffleArray(values);
            // Create an array to store the assigned values for each group
            var assignedValues = [];
            // Loop to assign a value to each group in the order they appear
            for (var groupIndex = 0; groupIndex < 6; groupIndex++) {
                if (values.length > 0) {
                    assignedValues.push(values.pop());
                } else {
                    break; // If all values are assigned, exit the loop early
                }
            }
            console.log(assignedValues);
            var groups = document.getElementsByClassName('btnGroup');
            for (var i = 0; i < groups.length; i++) {
                var buttons = groups[i].querySelectorAll('button');
                var randomIndex = assignedValues[i] - 1;
                for (var j = 0; j < buttons.length; j++) {
                    buttons[j].style.display = 'none';
                }
                buttons[randomIndex].style.display = 'inline';
            }
        }

        showRandomButton();

        function shuffleGroups() {
            var groupsContainer = document.getElementById('btnGroups');
            var groups = groupsContainer.querySelectorAll('.btnGroup');
            var groupArray = Array.from(groups);
            shuffleArray(groupArray);
            for (var i = 0; i < groupArray.length; i++) {
                var divRow = document.createElement('div');
                divRow.className = 'row';
                var paragraph = document.createElement('p');
                paragraph.className = 'stepInfo';
                paragraph.textContent = 'STEP ' + (i + 3);
                
                var newQuestionnaireButton = document.createElement('button');
                newQuestionnaireButton.type = 'button';
                newQuestionnaireButton.className = 'col-2 customBtn';
                newQuestionnaireButton.id = 'questionnaire_' + (i + 3);
                newQuestionnaireButton.innerHTML = '<a href="./questionnaire.html" target="_blank">questionnaire</a>';


                var newFinishButton = document.createElement('button');
                newFinishButton.type = 'button';
                newFinishButton.className = 'col-6 customBtn';

                // var buttonId = 'step_' + (i+3);
                // document.getElementById('finishStep_' + index).onclick = function() {
                //     changeDivIdAndHideButton(buttonId);
                // };

                newFinishButton.id = 'finishStep_' + (i + 3);
                newFinishButton.innerHTML = 'I have finished this step.';
               
                
                groupArray[i].id = 'step_' + (i+3);

                divRow.appendChild(paragraph);
                groupsContainer.appendChild(divRow);
                groupsContainer.appendChild(groupArray[i]);
                groupArray[i].appendChild(newQuestionnaireButton);
                groupsContainer.appendChild(newFinishButton);

            }
        }

        shuffleGroups();


        function changeDivIdAndHideButton(divId) {
            console.log(divId);
            var divElement = document.getElementById(divId);
            divElement.id = divId;

            var allButtons = divElement.querySelectorAll('button');

            var allParagraphs = divElement.querySelectorAll('p');

            allParagraphs.forEach(function(paragraph) {
                paragraph.style.color = 'rgba(153, 156, 156, 0.836)';
                paragraph.style.textDecoration = 'line-through';

            });

            // Hide all the buttons
            allButtons.forEach(function(button) {
                button.style.display = 'none';
            });
        }

        document.getElementById('step_4').style.display = 'none';
        document.getElementById('finishStep_4').style.display = 'none';
        document.getElementById('step_5').style.display = 'none';
        document.getElementById('finishStep_5').style.display = 'none';
        document.getElementById('step_6').style.display = 'none';
        document.getElementById('finishStep_6').style.display = 'none';
        document.getElementById('step_7').style.display = 'none';
        document.getElementById('finishStep_7').style.display = 'none';
        document.getElementById('step_8').style.display = 'none';
        document.getElementById('finishStep_8').style.display = 'none';
        document.getElementById('step_9').style.display = 'none';



        document.getElementById('finishStep_3').addEventListener('click', function() {
            changeDivIdAndHideButton('step_3');
            this.style.display = 'none';

            document.getElementById('step_4').style.display = 'block';
            document.getElementById('finishStep_4').style.display = 'inline';
        });

        document.getElementById('finishStep_4').addEventListener('click', function() {
            changeDivIdAndHideButton('step_4');
            this.style.display = 'none';

            document.getElementById('step_5').style.display = 'block';
            document.getElementById('finishStep_5').style.display = 'inline';
        });

        document.getElementById('finishStep_5').addEventListener('click', function() {
            changeDivIdAndHideButton('step_5');
            this.style.display = 'none';

            document.getElementById('step_6').style.display = 'block';
            document.getElementById('finishStep_6').style.display = 'inline';
        });

        document.getElementById('finishStep_6').addEventListener('click', function() {
            changeDivIdAndHideButton('step_6');
            this.style.display = 'none';

            document.getElementById('step_7').style.display = 'block';
            document.getElementById('finishStep_7').style.display = 'inline';
        });

        
        document.getElementById('finishStep_7').addEventListener('click', function() {
            changeDivIdAndHideButton('step_7');
            this.style.display = 'none';

            document.getElementById('step_8').style.display = 'block';
            document.getElementById('finishStep_8').style.display = 'inline';
        });

        
        document.getElementById('finishStep_8').addEventListener('click', function() {
            changeDivIdAndHideButton('step_8');
            this.style.display = 'none';

            document.getElementById('step_9').style.display = 'inline';
        });

        




        window.addEventListener('beforeunload', function (e) {
            e.preventDefault();
            e.returnValue = '';
            const warningMessage = 'Please do not close the current window until you finish the whole user study';
            e.returnValue = warningMessage;
            return warningMessage;
        });
    </script>

</body>

</html>